steps:
- name: 'gcr.io/cloud-builders/docker'
  args:
    - build
    - '-t'
    - 'asia-south1-docker.pkg.dev/$PROJECT_ID/cicd-repo/app:$BUILD_ID'
    - '-t'
    - 'asia-south1-docker.pkg.dev/$PROJECT_ID/cicd-repo/app:latest'
    - '.'

- name: 'gcr.io/cloud-builders/docker'
  args:
    - push
    - 'asia-south1-docker.pkg.dev/$PROJECT_ID/cicd-repo/app:$BUILD_ID'

- name: 'gcr.io/cloud-builders/docker'
  args:
    - push
    - 'asia-south1-docker.pkg.dev/$PROJECT_ID/cicd-repo/app:latest'

images:
- 'asia-south1-docker.pkg.dev/$PROJECT_ID/cicd-repo/app:$BUILD_ID'
- 'asia-south1-docker.pkg.dev/$PROJECT_ID/cicd-repo/app:latest'
